# Churn Mitigation Project

The repository contains all the material related to the case study for the churn mitigation project.

A number of crucial scripts guide the analysis:

* `0_model_build.R` runs the model training and evaluation with the best hyperparameters. Versions the model in pins folder.
* `1_model_deploy.R` deploys the model to be served on an API endpoint.
* `2_generate_synth_data.R` generates synthetic client data to be used in the Shiny application for demonstration purposes.

These scripts leverage a number of utility functions in the root folder.

The script `env-setup.R` sets up the environment, loads the necessary packages and sets up some globals. Obviously, in the future, we will leverage renv.

A number of sub-folders are available in the repository, as described below.

## Data

The data used in the case study is available in the `data` folder. It contains:

* `churn_data.csv` A sample of churn data for a private bank in Geneva (provided by the recruiter). 
* `iran_customer_churn.csv` A sample of data for an Iranian Telecommunications company which allowed to show the typical performance of the models in a more realistic setting.
* `crm-db.sqlite.csv` A synthetic dataset generated by the authors to provide realistic input to the demo app.

## Prediction models

The `model_versions` folder contains the different versions of the models generated by the training process. The folder contains pins folders that can be used to load the models and information needed to explain the predictions (SHAP values through DALEXExtra explainer object).

## Application

The `app` folder contains the Shiny application that allows to interact with the models and leverage an AI assistant to help with the churn inspection.

## Prompt templates

To guide the AI assistant, a number of prompt templates are available in the `prompts` folder and used to generate an enriched user prompt with the client data and the SHAP values.